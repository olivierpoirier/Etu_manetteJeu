<!doctype html>
<html>
  <head>
    <script src="pixi.min.js"></script>
    <script src="./constants.js" type="module/javascript"></script>  
    <script src="./gameObjectsConst.js" type="module/javascript"></script>   
    <script src="./startGame.js" type="module/javascript"></script>   
  </head>
  <body>      
    
    <script type="module">

      import { app, gameWidth, gameHeight }  from "./constants.js";
      import { wallsManagement, timerBeforeSpawningWall, increaseDifficultyOfWalls } from "./wallsManagement.js";
      import { movementControl }  from "./controls.js";
      import { verifyIfGameStart }   from "./startGame.js";
      import { hideOrShowObjectsWhenGameStart } from "./gameObjectsConst.js";

      let playerScore = 0;
      let isGameStarted = false;
      let level = 0;
      



      await app.init({ background: 'black', width: gameWidth, height: gameHeight });
      document.body.appendChild(app.canvas);
      // Add a ticker callback to move the sprite back and forth
      let elapsed = 0.0;
      app.ticker.add((ticker) => {
        let isTouchedByWallByTop = false;
        let isTouchedByWallByLeft = false;
        let isTouchedByWallByBottom = false; 
        let isTouchedByWallByRight = false;
        let isTouchedResponse = []
        let gameStartedAndLevelResponse = []
        isTouchedResponse = wallsManagement(isGameStarted, isTouchedByWallByTop, isTouchedByWallByLeft, isTouchedByWallByBottom, isTouchedByWallByRight, playerScore, level);
        playerScore = isTouchedResponse[4];



        if(!isGameStarted) {
          [isGameStarted, level] = verifyIfGameStart(isGameStarted);
        }


        //console.log(gameStartedAndLevelResponse);
        timerBeforeSpawningWall(isGameStarted, level);
        //console.log(level);
        if (isGameStarted) {
          hideOrShowObjectsWhenGameStart(isGameStarted, playerScore);
          elapsed += ticker.deltaTime;
          increaseDifficultyOfWalls();
        }
        movementControl(isTouchedResponse[0], isTouchedResponse[1], isTouchedResponse[2], isTouchedResponse[3]);
      });
    </script>
    <script src="./wallsManagement.js" type="module/javascript"></script>
    <script src="./controls.js" type="module/javascript"></script>
    <script src="./wallsManagement.js" type="module/javascript"></script>
        
  </body>
</html>